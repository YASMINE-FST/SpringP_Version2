<div class="background-blur"></div>
<div class="background-gradient"></div>

<div class="login-page">
  <div class="login-container">
    <div class="login-header">
      <div class="login-icon">
        <i class="fas fa-user-circle"></i>
      </div>
      <h1 class="login-title">Connectez-vous</h1>
    </div>

    <div *ngIf="message"
         [ngClass]="{ 'error-message': isError, 'success-message': !isError }"
         class="message-box">
      {{ message }}
      <span class="close-icon" (click)="message = ''">Ã—</span>
    </div>

    <form (ngSubmit)="onSubmit()" #loginForm="ngForm">
      <div class="form-group floating-label input-icon">
        <input
          id="email"
          type="email"
          required
          [(ngModel)]="email"
          name="email"
          placeholder=" "
          aria-label="Email" />
        <label for="email">Email</label>
        <i class="fas fa-envelope"></i>
      </div>

      <div class="form-group floating-label input-icon password-field">
        <input
          id="password"
          [type]="showPassword ? 'text' : 'password'"
          required
          [(ngModel)]="password"
          name="password"
          placeholder=" "
          aria-label="Mot de passe" />
        <label for="password">Mot de passe</label>


      </div>
      
      <button type="button" class="toggle-password" (click)="togglePasswordVisibility()" tabindex="-1" aria-label="Afficher/Masquer le mot de passe">
      <i [class.fa-eye]="!showPassword" [class.fa-eye-slash]="showPassword" class="fas"></i>
      </button>

      <div class="login-options">
        <label class="remember-me">
          <input type="checkbox" [(ngModel)]="rememberMe" name="rememberMe" />
          Remember me
        </label>
        <a href="#" class="forgot-password" (click)="forgotPassword($event)">Forgot Password?</a>
      </div>

      <button
        type="submit"
        class="submit-btn"
        [disabled]="!loginForm.form.valid || loading">
        <span *ngIf="!loading"><i class="fas fa-sign-in-alt"></i> SIGN IN</span>
        <span *ngIf="loading"><i class="fas fa-spinner fa-spin"></i> PROCESSING...</span>
      </button>
    </form>

    <p class="signup-link">
      Don't have an account?
      <a [routerLink]="['/signup']">Sign up</a>
    </p>
  </div>
</div>
